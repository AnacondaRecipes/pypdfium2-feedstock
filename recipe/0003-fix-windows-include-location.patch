From 0a6e8c671e1a7a0c6dfd6e3919a90335b8abc4cf Mon Sep 17 00:00:00 2001
From: Marek Waszkiewicz <mwaszkiewicz@anaconda.com>
Date: Thu, 31 Aug 2023 16:44:49 +0200
Subject: [PATCH 3/3] fix windows include location

---
 setupsrc/pypdfium2_setup/update_pdfium.py | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/setupsrc/pypdfium2_setup/update_pdfium.py b/setupsrc/pypdfium2_setup/update_pdfium.py
index 29be151..3586361 100755
--- a/setupsrc/pypdfium2_setup/update_pdfium.py
+++ b/setupsrc/pypdfium2_setup/update_pdfium.py
@@ -9,6 +9,7 @@ import tarfile
 import argparse
 import traceback
 import functools
+import platform
 import os.path
 from pathlib import Path
 from urllib import request
@@ -144,7 +145,11 @@ def generate_bindings(archives, version):
         ver_file.write_text(str(version))
 
         # now passing $SRC_DIR/data/<arch> and $PREFIX
-        call_ctypesgen(pl_dir, prefix_dir/"include")
+        include_dir = prefix_dir/"include"
+        if platform.system().lower() == "windows":
+            include_dir = prefix_dir/"Library/include"
+
+        call_ctypesgen(pl_dir, include_dir)
 
         # do not remove $SRC_DIR/data/<arch>/build_tar, as it was never created
         # shutil.rmtree(build_dir)
-- 
2.25.1

